[build]
command = "pnpm build"
publish = "dist"
functions = "netlify/functions"

# Route all API requests to the api.ts handler
# Use :splat to capture the remaining path and pass it as a query parameter
[[rewrites]]
from = "/api/*"
to = "/.netlify/functions/api?path=:splat"
status = 200

# SPA fallback for client-side routing
# This redirect catches all URLs EXCEPT /api and rewrites to index.html for client-side routing
[[redirects]]
from = "/*"
to = "/index.html"
status = 200
conditions = { NOT = { Path = ["/api/*"] } }
